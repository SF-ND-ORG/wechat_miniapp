<!-- æ ¡å›­å¢™ç®¡ç†é¡µé¢ -->
<view class="wall-manage-container">
  
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="nav-header">
    <view class="nav-back" bindtap="goBack">
      <text class="back-icon">â†</text>
    </view>
    <text class="nav-title">æ ¡å›­å¢™ç®¡ç†</text>
    <view class="nav-placeholder"></view>
  </view>

  <!-- ç»Ÿè®¡å¡ç‰‡ -->
  <view class="stats-cards">
    <view class="stat-card">
      <text class="stat-number">{{statistics.pending_count || 0}}</text>
      <text class="stat-label">å¾…å®¡æ ¸</text>
    </view>
    <view class="stat-card">
      <text class="stat-number">{{statistics.approved_count || 0}}</text>
      <text class="stat-label">å·²é€šè¿‡</text>
    </view>
    <view class="stat-card">
      <text class="stat-number">{{statistics.total_count || 0}}</text>
      <text class="stat-label">æ€»æ¶ˆæ¯</text>
    </view>
  </view>

  <!-- ç­›é€‰æ  -->
  <view class="filter-bar">
    <view class="filter-tabs">
      <view class="filter-tab {{currentStatus === 'PENDING' ? 'active' : ''}}" 
            bindtap="switchStatus" data-status="PENDING">
        å¾…å®¡æ ¸
      </view>
      <view class="filter-tab {{currentStatus === 'APPROVED' ? 'active' : ''}}" 
            bindtap="switchStatus" data-status="APPROVED">
        å·²é€šè¿‡
      </view>
      <view class="filter-tab {{currentStatus === 'REJECTED' ? 'active' : ''}}" 
            bindtap="switchStatus" data-status="REJECTED">
        å·²æ‹’ç»
      </view>
      <view class="filter-tab {{currentStatus === 'ALL' ? 'active' : ''}}" 
            bindtap="switchStatus" data-status="ALL">
        å…¨éƒ¨
      </view>
    </view>
  </view>

  <!-- æ¶ˆæ¯åˆ—è¡¨ -->
  <scroll-view class="message-list" scroll-y="{{true}}" refresher-enabled="{{true}}"
               refresher-triggered="{{refreshing}}" bindrefresherrefresh="onRefresh"
               bindscrolltolower="loadMore">
    
    <view class="message-item" wx:for="{{messages}}" wx:key="id">
      <view class="message-header">
        <view class="message-type type-{{item.message_type}}">
          {{getTypeText(item.message_type)}}
        </view>
        <view class="message-status status-{{item.status}}">
          {{getStatusText(item.status)}}
        </view>
        <text class="message-time">{{formatTime(item.timestamp)}}</text>
      </view>
      
      <view class="message-content">
        <text class="message-title" wx:if="{{item.title}}">{{item.title}}</text>
        <text class="message-text">{{item.content}}</text>
        <view class="message-meta">
          <text class="message-author">ç”¨æˆ·ID: {{item.user_id}}</text>
          <text class="message-stats">ğŸ‘ {{item.view_count}} ğŸ‘ {{item.like_count}}</text>
        </view>
      </view>

      <!-- æ“ä½œæŒ‰é’® -->
      <view class="message-actions" wx:if="{{item.status === 'PENDING'}}">
        <button class="action-btn approve-btn" 
                bindtap="approveMessage" data-id="{{item.id}}">
          é€šè¿‡
        </button>
        <button class="action-btn reject-btn" 
                bindtap="rejectMessage" data-id="{{item.id}}">
          æ‹’ç»
        </button>
      </view>
      
      <view class="message-actions" wx:if="{{item.status === 'APPROVED'}}">
        <button class="action-btn reject-btn" 
                bindtap="rejectMessage" data-id="{{item.id}}">
          æ’¤å›
        </button>
        <button class="action-btn delete-btn" 
                bindtap="deleteMessage" data-id="{{item.id}}">
          åˆ é™¤
        </button>
      </view>

      <view class="message-actions" wx:if="{{item.status === 'REJECTED'}}">
        <button class="action-btn approve-btn" 
                bindtap="approveMessage" data-id="{{item.id}}">
          æ¢å¤
        </button>
        <button class="action-btn delete-btn" 
                bindtap="deleteMessage" data-id="{{item.id}}">
          åˆ é™¤
        </button>
      </view>
    </view>

    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="loading-more" wx:if="{{loading}}">
      <text>åŠ è½½ä¸­...</text>
    </view>

    <view class="no-more" wx:if="{{!hasMore && messages.length > 0}}">
      <text>æ²¡æœ‰æ›´å¤šæ¶ˆæ¯äº†</text>
    </view>

    <view class="empty-state" wx:if="{{!loading && messages.length === 0}}">
      <text class="empty-icon">ğŸ“­</text>
      <text class="empty-text">æš‚æ— æ¶ˆæ¯</text>
    </view>
  </scroll-view>
</view>