<view class="wall-container">
  <!-- é¡¶éƒ¨æ“ä½œæ  -->
  <view class="top-bar">
    <view class="filter-tabs">
      <text class="tab {{currentType === 'all' ? 'active' : ''}}" bindtap="onTypeChange" data-type="all">å…¨éƒ¨</text>
      <text class="tab {{currentType === 'general' ? 'active' : ''}}" bindtap="onTypeChange" data-type="general">æ™®é€š</text>
      <text class="tab {{currentType === 'lost_and_found' ? 'active' : ''}}" bindtap="onTypeChange" data-type="lost_and_found">å¤±ç‰©</text>
      <text class="tab {{currentType === 'confession' ? 'active' : ''}}" bindtap="onTypeChange" data-type="confession">è¡¨ç™½</text>
      <text class="tab {{currentType === 'help' ? 'active' : ''}}" bindtap="onTypeChange" data-type="help">æ±‚åŠ©</text>
    </view>
    <view class="action-buttons">
      <button class="admin-btn" wx:if="{{isAdmin}}" bindtap="goToAdmin" size="mini" type="default">ç®¡ç†</button>
      <button class="post-btn" bindtap="goToPost" type="primary" size="mini">å‘å¸ƒ</button>
    </view>
  </view>

  <!-- æœç´¢æ  -->
  <view class="search-container">
    <input class="search-input" placeholder="æœç´¢å†…å®¹..." bindinput="onSearchInput" value="{{searchKeyword}}" />
    <button class="search-btn" bindtap="onSearch" size="mini">æœç´¢</button>
  </view>

  <!-- æ¶ˆæ¯åˆ—è¡¨ -->
  <view class="message-list">
    <view wx:for="{{messages}}" wx:key="id" class="message-item" bindtap="goToDetail" data-id="{{item.id}}">
      <view class="message-header">
        <view class="message-type">
          <text class="type-tag type-{{item.message_type}}">{{getTypeText(item.message_type)}}</text>
        </view>
        <view class="message-time">{{formatTime(item.timestamp)}}</view>
      </view>
      
      <view class="message-title" wx:if="{{item.title}}">{{item.title}}</view>
      <view class="message-content">{{item.content}}</view>
      
      <view class="message-meta" wx:if="{{item.location || item.contact_info}}">
        <text wx:if="{{item.location}}" class="meta-item">ğŸ“ {{item.location}}</text>
        <text wx:if="{{item.contact_info}}" class="meta-item">ğŸ“ {{item.contact_info}}</text>
      </view>
      
      <view class="message-footer">
        <view class="stats">
          <text class="stat-item">ğŸ‘€ {{item.view_count}}</text>
          <text class="stat-item">ğŸ‘ {{item.like_count}}</text>
        </view>
        <view class="tags" wx:if="{{item.tags}}">
          <text class="tag" wx:for="{{parseTags(item.tags)}}" wx:key="*this">{{item}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading" wx:if="{{loading}}">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty" wx:if="{{!loading && messages.length === 0}}">
    <text>æš‚æ— æ¶ˆæ¯</text>
  </view>
</view>