<scroll-view class="ui-page wall-post-page" scroll-y="true">
    <view class="ui-card wall-post-hero">
        <text class="ui-title">发布留言板消息</text>
    </view>

    <view class="ui-card ui-card--quiet wall-post-form">
        <form bindsubmit="onSubmit" class="wall-post-form__body">
            <view class="wall-post-field">
                <text class="wall-post-field__label">消息类型</text>
                <view class="wall-post-types">
                    <text class="wall-post-type {{messageType === 'general' ? 'is-active' : ''}}" bindtap="selectType" data-type="general">普通</text>
                    <text class="wall-post-type {{messageType === 'lost_and_found' ? 'is-active' : ''}}" bindtap="selectType" data-type="lost_and_found">失物招领</text>
                    <text class="wall-post-type {{messageType === 'help' ? 'is-active' : ''}}" bindtap="selectType" data-type="help">求助</text>
                </view>
            </view>

            <view class="wall-post-field">
                <text class="wall-post-field__label">标题 (可选)</text>
                <input class="wall-post-input" placeholder="请输入标题" bindinput="onTitleInput" value="{{title}}" maxlength="200" />
            </view>

            <view class="wall-post-field">
                <view class="wall-post-field__line">
                    <text class="wall-post-field__label">内容 *</text>
                    <text class="wall-post-field__count">{{content.length}}/1000</text>
                </view>
                <textarea class="wall-post-textarea" placeholder="请输入内容..." bindinput="onContentInput" value="{{content}}" maxlength="1000" show-confirm-bar="{{false}}" />
                <text class="wall-post-field__hint">请描述清楚时间、地点、人物等关键信息，便于同学了解。</text>
                <view class="wall-post-upload">
                    <t-upload mediaType="{{['video','image']}}" max="{{0}}" files="{{files}}" bind:add="handleAdd" bind:remove="handleRemove"></t-upload>
                </view>
            </view>

            <view class="wall-post-field">
                <text class="wall-post-field__label">联系方式 (可选)</text>
                <input class="wall-post-input" placeholder="QQ、微信、电话等" bindinput="onContactInput" value="{{contactInfo}}" maxlength="200" />
            </view>

            <view class="wall-post-field">
                <text class="wall-post-field__label">位置信息 (可选)</text>
                <input class="wall-post-input" placeholder="如：图书馆、食堂等" bindinput="onLocationInput" value="{{location}}" maxlength="200" />
            </view>

            <view class="wall-post-field">
                <text class="wall-post-field__label">标签 (可选)</text>
                <input class="wall-post-input" placeholder="用逗号分隔，如：急,重要" bindinput="onTagsInput" value="{{tags}}" maxlength="500" />
                <text class="wall-post-field__hint">便于搜索，建议使用 1-3 个关键词。</text>
            </view>

            <view class="wall-post-submit">
                <button class="wall-post-submit__btn" formType="submit" type="primary" disabled="{{!content || submitting}}">
                    {{submitting ? '发布中...' : '发布消息'}}
                </button>
            </view>
        </form>
    </view>

    <view class="ui-card ui-card--quiet wall-post-tips">
        <text class="wall-post-section-title">发布须知</text>
        <view class="wall-post-tip-list">
            <text class="wall-post-tip">• 请确保内容真实有效，避免发布不当言论。</text>
            <text class="wall-post-tip">• 图片建议清晰无遮挡，帮助他人快速理解。</text>
            <text class="wall-post-tip">• 管理员审核通过后才会在校园墙展示。</text>
        </view>
    </view>
</scroll-view>